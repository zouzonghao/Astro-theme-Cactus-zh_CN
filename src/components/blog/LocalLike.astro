---
// æœ¬åœ°ç‚¹èµç»„ä»¶
---

<div class="flex items-center gap-4 py-4 border-t border-textColor/20">
    <button 
        id="like-btn" 
        class="flex items-center gap-2 px-4 py-2 rounded-lg border border-textColor/20 hover:bg-accent/10 hover:border-accent transition-all duration-200"
        title="ç‚¹èµè¿™ç¯‡æ–‡ç« "
    >
        <span id="like-icon" class="text-lg">ğŸ‘</span>
        <span class="text-sm">
            <span id="like-count">0</span> èµ
        </span>
    </button>
    
    <div class="text-sm text-textColor/60">
        è§‰å¾—æœ‰ç”¨å°±ç‚¹ä¸ªèµå§ï¼
    </div>
</div>

<script>
    const likeBtn = document.getElementById('like-btn');
    const likeIcon = document.getElementById('like-icon');
    const likeCount = document.getElementById('like-count');
    const pageUrl = window.location.pathname;
    
    // è·å–æœ¬åœ°å­˜å‚¨çš„ç‚¹èµæ•°æ®
    const getLikes = () => JSON.parse(localStorage.getItem('blog-likes') || '{}');
    const saveLikes = (likes) => localStorage.setItem('blog-likes', JSON.stringify(likes));
    
    // åˆå§‹åŒ–æ˜¾ç¤º
    const likes = getLikes();
    const currentPage = likes[pageUrl] || { count: 0, liked: false };
    
    const updateDisplay = (data) => {
        likeCount.textContent = data.count;
        likeIcon.textContent = data.liked ? 'â¤ï¸' : 'ğŸ‘';
        likeBtn.style.color = data.liked ? '#2bbc8a' : '';
        likeBtn.style.borderColor = data.liked ? '#2bbc8a' : '';
    };
    
    updateDisplay(currentPage);
    
    // ç‚¹å‡»äº‹ä»¶
    likeBtn?.addEventListener('click', () => {
        const likes = getLikes();
        const current = likes[pageUrl] || { count: 0, liked: false };
        
        const newData = {
            count: current.liked ? Math.max(0, current.count - 1) : current.count + 1,
            liked: !current.liked
        };
        
        likes[pageUrl] = newData;
        saveLikes(likes);
        updateDisplay(newData);
        
        // ç®€å•çš„åé¦ˆåŠ¨ç”»
        likeBtn.style.transform = 'scale(0.95)';
        setTimeout(() => {
            likeBtn.style.transform = 'scale(1)';
        }, 150);
    });
</script>